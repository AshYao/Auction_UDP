# 用户手册

## 软件介绍

这是一个简单易用的网络拍卖行程序，包含服务端和客户端两部分。服务端先行启动，用于存储数据、处理客户端发送的各种信息、**为拍卖进行倒计时等。**而**用户和管理员则可以通过操作客户端实现各种必要的功能。**

Github: https://github.com/AshYao/Auction_UDP

## 操作指南

1. 首先运行Sever.java启动服务器。
2. 运行Client.java, 上方黑色背景的文本框为系统信息，下方白色背景的文本框可输入指令，输入完毕后点击`发送指令`按钮。
3. 管理员通过 `master` 指令登陆，用户通过 `register` 指令注册或者通过 `login` 指令登陆。
4. 登陆成功后方可执行各种操作，参见「指令列表」部分**（部分指令只能在进入拍卖室后使用）。**
5. 用户一次只能进入一个竞拍室，**拍卖倒计时结束后竞拍室关闭，当前竞拍品的最终出价者获得该物品。**
6. 完成操作后，应点击「尝试退出」按钮。若您已登陆，程序将自动检查是否符合退出条件。若符合条件，将自动关闭客户端，等待3秒后关闭窗口。
7. 直接关闭窗口将结束当前进程，并不会在后台运行占用进程。**但如果已经登陆，强烈不建议用这种方式退出，以免错过重要信息！**（如果你不得已这么做了，请查看「疑难解答」部分获取帮助。）

## 指令列表

### 用户指令

1. `register  bidderName  password`

   使用用`bidderName`和`password`注册。

2. `login  bidderName  password`

   使用用`bidderName`和`password`登陆。

3. `auctions`

   列出所有竞拍室的列表及其价格信息。 

4. `join  auctionNo`

   加入编号为`auctionNo`的竞拍室，室中的所有竞拍者收到您加入的消息。 

5. `list`

   列出同一竞拍室中参加竞拍者的情况。

6. `bid  price`

   为室中竞拍品出价`price`，室中的所有竞拍者收到您的竞价消息，拍卖的倒计时重置为30秒。

7. `leave` 

   如果您不是当前竞拍品的最终出价者，您可以使用这条指令离开某一竞拍室，室中的所有竞拍者收到您离开的消息。

8. `quit`

   输入该指令后，程序将自动检查是否符合退出条件。若符合条件，将自动关闭客户端，等待3秒后关闭窗口。

> 注：如果您输入了错误的指令，系统将返回提示。

### 管理员指令

1. `master  masterName  password`

   使用用`masterName`和`password`登陆。
2. `msg  (bidderID)  message`

   向指定用户（其编号为`bidderID`）或向所有用户（若指令中不填写`bidderID`）发送消息`message`，用以某些提示。 
3. `auctions`

   列出所有竞拍室的列表及其价格信息。 
4. `enter auctionNo`

   进入编号为`auctionNo`的竞拍室，室中的竞拍者不会收到提示。
5. `list` 

   列出同一竞拍室中参加竞拍者的情况。
6. `kickout bidderID` 

   将编号为`bidderID` 的竞拍者踢出当前竞拍室，**当该竞拍者不能是当前竞拍品的最终出价者。**被踢出的竞拍者收到提示信息，室中的其它竞拍者收到其离开的消息。
7. `leave` 

   离开当前竞拍室，室中的竞拍者不会收到提示。
8. `open  auctionName  price`

   开通新的竞拍室，每个竞拍室只有一件竞拍品, 该竞拍品名字为`auctionName`  , 起拍价为`price`.
9. `close auctionName`

   关闭某一竞拍室，并通知每一位参加竞拍者。提示当前竞拍品的最终出价者获得该物品。
10. `quit`

   输入该指令后，程序将自动检查是否符合退出条件。若符合条件，将自动关闭客户端，等待3秒后关闭窗口。

> 注：如果您输入了错误的指令，系统将返回提示。

## 疑难解答

Q：我如果开多个窗口重复登陆，可以进入多个竞拍室吗？

A：不可以，只有最近一次的登陆窗口可以接受服务器的信息。**其余的窗口将失去效用。**



Q：我不小心直接关闭了窗口，并且正处于竞拍室中，应该怎么办？

A：虽然我们不推荐直接关闭窗口（为此我们在界面中），但是您的行为并不会影响程序的后续运行，照成无可挽回的损失。请马上重新启动客户端采取补救措施：如果您退出时不是竞拍室中竞拍品的最终出价者且竞拍室尚未关闭，您还可以重新进入竞拍室中竞价；**如果您退出前已经是竞拍室中竞拍品的最终出价者，而竞拍室在重新登陆后已关闭，您可以联系我们的人工客服获取您的竞拍情况。**在确认您获得物品后，我们的服务人员会尽快安排付款与发货事宜。虽然我们的人工客服不会理你且服务人员不存在，但是服务器确实是存储着最后的竞拍信息的。



Q：如果我关闭窗口后进入的是其它的拍卖室，你们的程序也不会阻止我吗？如果我通过这个方法同时竞拍多个竞拍品怎么办？

A：说实话，我们并不介意。如果您真的对竞拍品感兴趣且要同时竞拍多个，那您就不得不出一个能够吓退其他人的价格。而我们认为，一个竞拍品被出价最高者获得并不是一件坏事。事实上，**如果是大规模用户同时在线的情况，这样的策略基本上是无效的，**除非您非常非常非常有钱。其他人或许遵守了规则，但是他们没有您那么有钱啊。有钱任性的感觉是很好的，不是么？



Q：用户关闭了程序后就会永久错失服务器发送的信息，这样不会损失一些重要信息吗？为什么不进行一定的确认？

A：由于本程序的应用场景可以用于相对来说分组丢失率非常小的网络环境，且要求能够支持比较大规模的用户同时在线，所以采用的是UDP实现策略。**由于UDP策略是不支持建立链接的，如果我们强制要进行信息确认，反而会大幅度地降低用户体验。**无论如何，我们是一家发展中的创业公司，我们有热情有激情还有可以压榨的实习工，所以如果真的有什么问题您就联系我们的人工客服好了。如果是谁也解决不了的巨大问题，那我们会及时宣布破产的，请不要为我们担心。